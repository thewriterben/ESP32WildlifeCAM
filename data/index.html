<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESP32 Wildlife CAM - Control Dashboard</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='%23228b22' d='M12 2L13.09 8.26L22 9L13.09 9.74L12 16L10.91 9.74L2 9L10.91 8.26L12 2Z'/></svg>">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>ü¶Ö ESP32 Wildlife CAM</h1>
            <p class="subtitle">Real-time Wildlife Monitoring System</p>
            <div class="status-indicators">
                <div class="status-item">
                    <span class="status-label">System Status:</span>
                    <span id="system-status" class="status-value online">Online</span>
                </div>
                <div class="status-item">
                    <span class="status-label">Battery:</span>
                    <span id="battery-level" class="status-value">78%</span>
                </div>
                <div class="status-item">
                    <span class="status-label">Uptime:</span>
                    <span id="uptime" class="status-value">2d 14h 32m</span>
                </div>
            </div>
        </header>

        <nav class="navigation">
            <button class="nav-btn active" data-section="live">Live View</button>
            <button class="nav-btn" data-section="gallery">Gallery</button>
            <button class="nav-btn" data-section="settings">Settings</button>
            <button class="nav-btn" data-section="analytics">Analytics</button>
            <button class="nav-btn" data-section="system">System</button>
        </nav>

        <main class="content">
            <!-- Live View Section -->
            <section id="live-section" class="section active">
                <div class="live-view">
                    <div class="camera-feed">
                        <div class="feed-placeholder">
                            <h3>üì∑ Live Camera Feed</h3>
                            <p>Camera feed will appear here when streaming is enabled</p>
                            <button id="start-stream" class="btn btn-primary">Start Live Stream</button>
                        </div>
                        <img id="live-image" src="" alt="Live camera feed" style="display: none;">
                    </div>
                    <div class="live-controls">
                        <div class="control-group">
                            <h3>Camera Controls</h3>
                            <button id="capture-btn" class="btn btn-success">üì∏ Capture Photo</button>
                            <button id="trigger-detection" class="btn btn-warning">üéØ Test Motion Detection</button>
                        </div>
                        <div class="control-group">
                            <h3>Quick Settings</h3>
                            <label>
                                Motion Sensitivity:
                                <input type="range" id="motion-sensitivity" min="1" max="10" value="5">
                                <span id="sensitivity-value">5</span>
                            </label>
                            <label>
                                <input type="checkbox" id="night-mode"> Night Mode
                            </label>
                            <label>
                                <input type="checkbox" id="flash-enabled" checked> Flash Enabled
                            </label>
                        </div>
                    </div>
                </div>
                <div class="recent-activity">
                    <h3>Recent Activity</h3>
                    <div id="activity-log" class="activity-list">
                        <div class="activity-item">
                            <span class="timestamp">2025-09-01 14:32:15</span>
                            <span class="event">Motion detected - Squirrel captured</span>
                        </div>
                        <div class="activity-item">
                            <span class="timestamp">2025-09-01 13:45:22</span>
                            <span class="event">Bird feeding activity</span>
                        </div>
                        <div class="activity-item">
                            <span class="timestamp">2025-09-01 12:18:07</span>
                            <span class="event">System check completed</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Gallery Section -->
            <section id="gallery-section" class="section">
                <div class="gallery-controls">
                    <h2>Wildlife Gallery</h2>
                    <div class="filters">
                        <select id="date-filter">
                            <option value="all">All Dates</option>
                            <option value="today">Today</option>
                            <option value="week">This Week</option>
                            <option value="month">This Month</option>
                        </select>
                        <select id="species-filter">
                            <option value="all">All Species</option>
                            <option value="birds">Birds</option>
                            <option value="mammals">Mammals</option>
                            <option value="unknown">Unknown</option>
                        </select>
                        <button id="download-all" class="btn btn-secondary">üì• Download All</button>
                    </div>
                </div>
                <div id="image-gallery" class="image-grid">
                    <!-- Images will be populated by JavaScript -->
                </div>
            </section>

            <!-- Settings Section -->
            <section id="settings-section" class="section">
                <div class="settings-container">
                    <h2>System Configuration</h2>
                    
                    <div class="settings-group">
                        <h3>Camera Settings</h3>
                        <div class="setting-row">
                            <label for="image-quality">Image Quality:</label>
                            <select id="image-quality">
                                <option value="low">Low (Fast)</option>
                                <option value="medium" selected>Medium</option>
                                <option value="high">High (Slow)</option>
                            </select>
                        </div>
                        <div class="setting-row">
                            <label for="capture-resolution">Resolution:</label>
                            <select id="capture-resolution">
                                <option value="vga">VGA (640x480)</option>
                                <option value="svga">SVGA (800x600)</option>
                                <option value="xga" selected>XGA (1024x768)</option>
                                <option value="sxga">SXGA (1280x1024)</option>
                                <option value="uxga">UXGA (1600x1200)</option>
                            </select>
                        </div>
                    </div>

                    <div class="settings-group">
                        <h3>Motion Detection</h3>
                        <div class="setting-row">
                            <label for="pir-sensitivity">PIR Sensitivity:</label>
                            <input type="range" id="pir-sensitivity" min="1" max="10" value="5">
                            <span id="pir-value">5</span>
                        </div>
                        <div class="setting-row">
                            <label for="trigger-delay">Trigger Delay (seconds):</label>
                            <input type="number" id="trigger-delay" min="1" max="300" value="30">
                        </div>
                        <div class="setting-row">
                            <label>
                                <input type="checkbox" id="burst-mode"> Burst Mode (3 photos)
                            </label>
                        </div>
                    </div>

                    <div class="settings-group">
                        <h3>Power Management</h3>
                        <div class="setting-row">
                            <label for="sleep-mode">Sleep Mode:</label>
                            <select id="sleep-mode">
                                <option value="disabled">Disabled</option>
                                <option value="light" selected>Light Sleep</option>
                                <option value="deep">Deep Sleep</option>
                            </select>
                        </div>
                        <div class="setting-row">
                            <label for="low-battery-threshold">Low Battery Alert (V):</label>
                            <input type="number" id="low-battery-threshold" min="3.0" max="4.2" step="0.1" value="3.5">
                        </div>
                    </div>

                    <div class="settings-actions">
                        <button id="save-settings" class="btn btn-primary">üíæ Save Settings</button>
                        <button id="reset-settings" class="btn btn-danger">üîÑ Reset to Defaults</button>
                    </div>
                </div>
            </section>

            <!-- Analytics Section -->
            <section id="analytics-section" class="section">
                <div class="analytics-container">
                    <h2>Wildlife Analytics</h2>
                    
                    <div class="metrics-grid">
                        <div class="metric-card">
                            <h3>Total Captures</h3>
                            <div class="metric-value">1,247</div>
                            <div class="metric-change">+23 today</div>
                        </div>
                        <div class="metric-card">
                            <h3>Species Identified</h3>
                            <div class="metric-value">18</div>
                            <div class="metric-change">+2 this week</div>
                        </div>
                        <div class="metric-card">
                            <h3>Peak Activity</h3>
                            <div class="metric-value">6-8 AM</div>
                            <div class="metric-change">Dawn feeding</div>
                        </div>
                        <div class="metric-card">
                            <h3>Detection Accuracy</h3>
                            <div class="metric-value">94.2%</div>
                            <div class="metric-change">+1.3% this month</div>
                        </div>
                    </div>

                    <div class="charts-container">
                        <div class="chart-card">
                            <h3>Daily Activity Pattern</h3>
                            <canvas id="activity-chart" width="400" height="200"></canvas>
                        </div>
                        <div class="chart-card">
                            <h3>Species Distribution</h3>
                            <canvas id="species-chart" width="400" height="200"></canvas>
                        </div>
                    </div>
                </div>
            </section>

            <!-- System Section -->
            <section id="system-section" class="section">
                <div class="system-container">
                    <h2>System Information</h2>
                    
                    <div class="system-grid">
                        <div class="system-card">
                            <h3>Hardware Status</h3>
                            <div class="status-list">
                                <div class="status-row">
                                    <span>ESP32-CAM:</span>
                                    <span class="status-ok">‚úÖ Online</span>
                                </div>
                                <div class="status-row">
                                    <span>Camera (OV2640):</span>
                                    <span class="status-ok">‚úÖ Functional</span>
                                </div>
                                <div class="status-row">
                                    <span>PIR Sensor:</span>
                                    <span class="status-ok">‚úÖ Active</span>
                                </div>
                                <div class="status-row">
                                    <span>SD Card:</span>
                                    <span class="status-ok">‚úÖ 28.3GB Free</span>
                                </div>
                                <div class="status-row">
                                    <span>WiFi:</span>
                                    <span class="status-ok">‚úÖ Connected (-42 dBm)</span>
                                </div>
                            </div>
                        </div>

                        <div class="system-card">
                            <h3>Power Status</h3>
                            <div class="power-info">
                                <div class="battery-indicator">
                                    <div class="battery-bar">
                                        <div class="battery-fill" style="width: 78%"></div>
                                    </div>
                                    <span>3.9V (78%)</span>
                                </div>
                                <div class="status-list">
                                    <div class="status-row">
                                        <span>Solar Panel:</span>
                                        <span class="status-ok">‚ö° Charging (45mA)</span>
                                    </div>
                                    <div class="status-row">
                                        <span>Power Mode:</span>
                                        <span>Light Sleep</span>
                                    </div>
                                    <div class="status-row">
                                        <span>Est. Runtime:</span>
                                        <span>4.2 days</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="system-card">
                            <h3>Environmental Data</h3>
                            <div class="env-data">
                                <div class="env-item">
                                    <span class="env-label">Temperature:</span>
                                    <span class="env-value">23.4¬∞C</span>
                                </div>
                                <div class="env-item">
                                    <span class="env-label">Humidity:</span>
                                    <span class="env-value">65.2%</span>
                                </div>
                                <div class="env-item">
                                    <span class="env-label">Light Level:</span>
                                    <span class="env-value">1,247 lux</span>
                                </div>
                                <div class="env-item">
                                    <span class="env-label">Last Motion:</span>
                                    <span class="env-value">14 min ago</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="system-actions">
                        <button id="restart-system" class="btn btn-warning">üîÑ Restart System</button>
                        <button id="update-firmware" class="btn btn-info">‚¨ÜÔ∏è Update Firmware</button>
                        <button id="download-logs" class="btn btn-secondary">üìã Download Logs</button>
                        <button id="factory-reset" class="btn btn-danger">‚ö†Ô∏è Factory Reset</button>
                    </div>
                </div>
            </section>
        </main>

        <footer class="footer">
            <p>&copy; 2025 ESP32 Wildlife CAM Project | 
               <a href="https://github.com/thewriterben/ESP32WildlifeCAM" target="_blank">GitHub</a> | 
               <span id="device-info">Device: ESP32-CAM v2.0</span>
            </p>
        </footer>
    </div>

    <!-- JavaScript -->
    <script src="app.js"></script>
</body>
</html>