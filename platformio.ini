; ESP32WildlifeCAM PlatformIO Configuration
; Created: 2025-08-31 17:37:10 UTC
; Author: thewriterben

[platformio]
default_envs = esp32cam
; Set these paths for offline development
packages_dir = ~/.platformio/packages_offline
cache_dir = ~/.platformio/cache_offline

[env]
platform = espressif32@6.4.0
framework = arduino
monitor_speed = 115200
monitor_filters = 
    esp32_exception_decoder
    time
    colorize
board_build.partitions = partitions.csv
build_flags = 
    -DCORE_DEBUG_LEVEL=3
    -DBOARD_HAS_PSRAM
    -mfix-esp32-psram-cache-issue
    -std=gnu++11
    -fexceptions
lib_deps = 
    ; Core libraries (ensure these are cached locally)
    sandeepmistry/LoRa@^0.8.0
    bblanchon/ArduinoJson@^6.21.3
    adafruit/Adafruit BME280 Library@^2.2.2
    tensorflow/TensorFlow Lite for Microcontrollers@^2.4.0
    
; AI-Thinker ESP32-CAM Configuration
[env:esp32cam]
board = esp32cam
build_flags = 
    ${env.build_flags}
    -DBOARD_AI_THINKER_CAM
    -DCAMERA_MODEL_AI_THINKER
    ; Reserve memory for camera framebuffer
    -DCONFIG_SPIRAM_CACHE_WORKAROUND
upload_speed = 460800

; ESP32-S3-CAM Configuration
[env:esp32s3cam]
board = esp32s3dev
build_flags = 
    ${env.build_flags}
    -DBOARD_ESP32S3_CAM
    -DCAMERA_MODEL_ESP32S3_EYE
    -DARDUINO_USB_MODE=1
    -DARDUINO_USB_CDC_ON_BOOT=1
upload_speed = 921600

; TTGO T-Camera Configuration
[env:ttgo-t-camera]
board = esp32dev
build_flags = 
    ${env.build_flags}
    -DBOARD_TTGO_T_CAMERA
    -DCAMERA_MODEL_TTGO_T_CAMERA
upload_speed = 921600

; Test environment for native unit tests
[env:native]
platform = native
build_flags = 
    -std=c++11
    -DUNIT_TEST
lib_deps = 
    throwtheswitch/Unity@^2.5.2