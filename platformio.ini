[platformio]
default_envs = esp32cam_wildlife

# Global project settings
[env]
platform = espressif32
framework = arduino
monitor_speed = 115200
lib_deps = 
    esp32-camera
    ArduinoJson
    WiFi
    AsyncTCP
    ESPAsyncWebServer

# Build flags common to all environments
build_flags = 
    -DCORE_DEBUG_LEVEL=3
    -DWILDLIFE_CAM_PROJECT
    -DUSE_UNIVERSAL_CAMERA_API

# ESP32-CAM (AI-Thinker) - Most popular, affordable option
[env:esp32cam_wildlife]
board = esp32cam
build_flags = 
    ${env.build_flags}
    -DWILDLIFE_CAM_BOARD=BOARD_ESP32_CAM
    -DDEFAULT_CAMERA_SENSOR=SENSOR_OV2640
    -DHAS_FLASH_LED=1
    -DHAS_SD_CARD=0
    -DHAS_PIR_SENSOR=0
    -DHAS_BATTERY=0
lib_deps = 
    ${env.lib_deps}

# ESP32-S3-CAM - Latest with improved performance
[env:esp32s3cam_wildlife]
board = esp32-s3-devkitc-1
build_flags = 
    ${env.build_flags}
    -DWILDLIFE_CAM_BOARD=BOARD_ESP32_S3_CAM
    -DDEFAULT_CAMERA_SENSOR=SENSOR_OV2640
    -DHAS_FLASH_LED=1
    -DHAS_SD_CARD=1
    -DHAS_PIR_SENSOR=0
    -DHAS_BATTERY=0
lib_deps = 
    ${env.lib_deps}
    SD

# ESP-EYE (Espressif Official) - Advanced computer vision
[env:espeye_wildlife]
board = esp-wrover-kit
build_flags = 
    ${env.build_flags}
    -DWILDLIFE_CAM_BOARD=BOARD_ESP_EYE
    -DDEFAULT_CAMERA_SENSOR=SENSOR_OV2640
    -DHAS_FLASH_LED=1
    -DHAS_SD_CARD=1
    -DHAS_PIR_SENSOR=0
    -DHAS_BATTERY=0
    -DESP_EYE_BOARD
lib_deps = 
    ${env.lib_deps}
    SD

# M5Stack Timer Camera - Compact with built-in battery
[env:m5stack_timercam_wildlife]
board = m5stack-timer-cam
build_flags = 
    ${env.build_flags}
    -DWILDLIFE_CAM_BOARD=BOARD_M5_TIMER_CAM
    -DDEFAULT_CAMERA_SENSOR=SENSOR_OV3660
    -DHAS_FLASH_LED=1
    -DHAS_SD_CARD=1
    -DHAS_PIR_SENSOR=1
    -DHAS_BATTERY=1
    -DM5_TIMER_CAM
lib_deps = 
    ${env.lib_deps}
    SD
    M5Stack

# TTGO T-Camera - ESP32-WROVER with OV2640
[env:ttgo_tcamera_wildlife]
board = ttgo-t1
build_flags = 
    ${env.build_flags}
    -DWILDLIFE_CAM_BOARD=BOARD_TTGO_T_CAMERA
    -DDEFAULT_CAMERA_SENSOR=SENSOR_OV2640
    -DHAS_FLASH_LED=1
    -DHAS_SD_CARD=1
    -DHAS_PIR_SENSOR=1
    -DHAS_BATTERY=1
    -DTTGO_T_CAMERA
lib_deps = 
    ${env.lib_deps}
    SD
    TFT_eSPI

# XIAO ESP32S3 Sense - Ultra-compact with camera
[env:xiao_esp32s3_sense_wildlife]
board = seeed_xiao_esp32s3
build_flags = 
    ${env.build_flags}
    -DWILDLIFE_CAM_BOARD=BOARD_XIAO_ESP32S3_SENSE
    -DDEFAULT_CAMERA_SENSOR=SENSOR_OV2640
    -DHAS_FLASH_LED=0
    -DHAS_SD_CARD=1
    -DHAS_PIR_SENSOR=0
    -DHAS_BATTERY=0
    -DXIAO_ESP32S3_SENSE
lib_deps = 
    ${env.lib_deps}
    SD

# Development environment for testing
[env:development]
board = esp32dev
build_flags = 
    ${env.build_flags}
    -DWILDLIFE_CAM_BOARD=BOARD_CUSTOM
    -DDEFAULT_CAMERA_SENSOR=SENSOR_OV2640
    -DDEVELOPMENT_MODE=1
    -DDEBUG_CAMERA_API=1
lib_deps = 
    ${env.lib_deps}

# Production build with optimizations
[env:production]
extends = env:esp32cam_wildlife
build_flags = 
    ${env.build_flags}
    -Os
    -DPRODUCTION_BUILD=1
    -DCORE_DEBUG_LEVEL=0
build_type = release

# Configuration for OTA updates
[env:esp32cam_ota]
extends = env:esp32cam_wildlife
upload_protocol = espota
upload_port = 192.168.1.100  # IP address of the camera
build_flags = 
    ${env.build_flags}
    -DOTA_UPDATES_ENABLED=1
lib_deps = 
    ${env.lib_deps}
    ArduinoOTA